import type { Task } from "@/types";

export const ALL_TASKS: Task[] = [
  // --- TEAM LEADER TASKS ---
  {
    id: "TL-1.2",
    version: 2,
    round: 2,
    title: "Round Start Review & Strategic Alignment",
    description:
      "Check: Gross Margin (%) must exceed 20%. TL must ensure all roles align their decisions to this target (e.g., Sales pricing, Procurement costs).",
    role: "Team Leader",
    transactionCode: "F.01 / ZVC2 (Reports)",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 2,
    dependencyIDs: [],
    completionType: "Manual-Tick",
    taskType: "Standard",
    completed: false,
    impact: "Revenue",
  },
  {
    id: "TL-2.2",
    version: 2,
    round: 2,
    title: "Cash Runway & Loan Management",
    description:
      "Strategy: Minimize interest expense while avoiding a liquidity crisis (<€100k). Key Calculation: Cash Runway (Days) = Current Cash Balance / Avg. Daily Outflow. Action: Only make large loan payments (25-50%) after high-profit rounds (R3+) and when the remaining cash balance will be >€200k.",
    role: "Team Leader",
    transactionCode: "Dashboard / ZFF7B",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "Continuous",
    startRound: 2,
    dependencyIDs: [],
    completionType: "Ongoing",
    taskType: "Standard",
    completed: false,
    impact: "Cost",
    visibility: "OnAlert",
    alertKey: "cashLow",
  },
  {
    id: "TL-3.2",
    version: 2,
    round: 2,
    title: "Strategy & Contingency Check",
    description:
      "Action: If Cash Alert or Critical RM Shortage is active, instruct Procurement to switch to Fast Vendor (V01/V02) and Logistics to hold non-critical transfers.",
    role: "Team Leader",
    transactionCode: "N/A (Team Coordination)",
    priority: "Medium",
    estimatedTime: 5,
    roundRecurrence: "Continuous",
    startRound: 2,
    dependencyIDs: [],
    completionType: "Manual-Tick",
    taskType: "Standard",
    completed: false,
    impact: "Risk",
    visibility: "OnAlert",
    alertKey: "rmShortage",
  },
  {
    id: "TL-4.2",
    version: 2,
    round: 2,
    title: "Final Strategic & Financial Lock-Down",
    description:
      "Final Check: Confirm Net Income is positive, and the planned Sustainability Investment (ZFB50) was successfully posted before the round ends.",
    role: "Team Leader",
    transactionCode: "Dashboard / ZFB50",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 2,
    dependencyIDs: ["P-4.2"],
    completionType: "Manual-Tick",
    taskType: "Standard",
    completed: false,
    impact: "Revenue",
  },
  {
    id: "TL-5.2",
    version: 2,
    round: 3,
    title: "Strategic Investment: Setup Time Reduction",
    description:
      "Strategy: This investment permanently lowers production setup time, increasing capacity and lowering COGS. ROI is highest when made early (R3/R4) and when pursuing a flexible product strategy. ROI Calculation: Savings = (Old Setup Time - New Setup Time) * (Cost/Hour + Carbon Value/Hour) * Total Future Setups.",
    role: "Team Leader",
    transactionCode: "ZFB50 (Investment)",
    priority: "Medium",
    estimatedTime: 10,
    roundRecurrence: "RoundStart",
    startRound: 3,
    dependencyIDs: [],
    completionType: "Data-Confirmed",
    taskType: "Standard",
    completed: false,
    impact: "Capacity",
    dataFields: [
      {
        fieldName: "Setup_Time_Reduction_Investment",
        dataType: "Currency",
        suggestedValue: 150000,
        aiHelp: "Invest early to maximize time savings and downstream capacity.",
      },
    ],
  },

  // --- SALES MANAGER TASKS ---
  {
    id: "S-1.2",
    version: 2,
    round: 1,
    title: "Market Analysis & Price Strategy",
    description:
      "Model Price Elasticity of Demand (PED) to predict how demand reacts to price changes. Goal: Find the optimal price to maximize Gross Revenue. Key Calculation: Qty Sold = f(Price Gap, Ad Spend, Previous Qty Sold). Prioritize products with the highest Product Gross Margin Rate.",
    role: "Sales",
    transactionCode: "ZMARKET / VK32",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: [],
    completionType: "Manual-Tick",
    taskType: "ERPsim Gather Data",
    completed: false,
    impact: "Revenue",
  },
  {
    id: "S-2.2",
    version: 2,
    round: 1,
    title: "Capacity & Inventory Constraint Check",
    description:
      "Critical Check: Compare R-N Total Forecast (Units) against Production Capacity (Max 250,000 units) and current Finished Goods Stock (FG). Calculation: R-N Forecast (Units) <= Production Capacity + FG Stock.",
    role: "Sales",
    transactionCode: "ZMB52 / Dashboard",
    priority: "High",
    estimatedTime: 3,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: [],
    completionType: "Manual-Tick",
    taskType: "ERPsim Gather Data",
    completed: false,
    impact: "Capacity",
  },
  {
    id: "S-3.2",
    version: 2,
    round: 1,
    title: "Sales Forecast Collaboration",
    description:
      "Align the demand forecast with Production and Procurement to avoid stockouts and reduce overproduction. Provide channel insights and planned promotions.",
    role: "Sales",
    transactionCode: "MD61",
    priority: "Medium",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["S-2.2"],
    completionType: "Manual-Tick",
    taskType: "ERPsim Input Data",
    completed: false,
    impact: "Revenue",
    dataFields: [
      {
        fieldName: "Total_Forecast_Units",
        dataType: "Integer",
        calculatedFrom: ["Historical_Sales", "Promotion_Lift"],
        aiHelp: "Use the latest demand signal plus promotional lift adjustments to prevent backlog.",
      },
    ],
  },
  {
    id: "S-4.2",
    version: 2,
    round: 1,
    title: "Ad Spend Allocation",
    description:
      "Shift marketing spend toward channels with the highest ROI. Coordinate with Logistics to ensure availability in promoted DCs.",
    role: "Sales",
    transactionCode: "ZADS",
    priority: "Medium",
    estimatedTime: 4,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["S-3.2"],
    completionType: "Data-Confirmed",
    taskType: "ERPsim Input Data",
    completed: false,
    impact: "Revenue",
    dataFields: [
      {
        fieldName: "Marketing_Budget",
        dataType: "Currency",
        suggestedValue: 50000,
        aiHelp: "Allocate spend where price gap is favorable and DC inventory is healthy.",
      },
      {
        fieldName: "Channel_Focus_Note",
        dataType: "String",
        suggestedValue: "Focus on DC12 and DC14",
        aiHelp: "Document which DCs receive the bulk of the campaign.",
      },
    ],
  },

  // --- PRODUCTION MANAGER TASKS ---
  {
    id: "PM-1.2",
    version: 2,
    round: 1,
    title: "Lot Size Strategy & BOM Alignment",
    description:
      "Goal: Find the Economic Production Quantity (EPQ) that minimizes total costs. Lock in a 48,000 Unit Lot Size to minimize Setup Cost per Unit. Key Calculation: EPQ = sqrt((2 * Annual Demand * Setup Cost) / Holding Cost per Unit).",
    role: "Production",
    transactionCode: "ZCS02 (BOM) / Dashboard",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: [],
    completionType: "Manual-Tick",
    taskType: "Standard",
    completed: false,
    impact: "Cost",
  },
  {
    id: "PM-2.2",
    version: 2,
    round: 1,
    title: "Confirm RM Availability & Run MRP",
    description:
      "Dependency Check: Before running MD01, confirm with Procurement that all Raw Materials required for the 48,000 unit run are either in stock or have confirmed incoming POs (check ZME2N). Condition: MRP Run = Ready AND Procurement DOS Set.",
    role: "Production",
    transactionCode: "LIT / MD01",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["S-3.2", "P-1.2"],
    completionType: "Manual-Tick",
    taskType: "ERPsim Gather Data",
    completed: false,
    impact: "Capacity",
  },
  {
    id: "PM-3.2",
    version: 2,
    round: 1,
    title: "Quantify Setup Cost Penalty",
    description:
      "Calculation: If the lot size is forced below 48,000 units, calculate the Setup Cost per Unit to justify the resulting high COGS. Calculation: Cost Viability Threshold = Setup Cost per Unit / Product Final Cost.",
    role: "Production",
    transactionCode: "CO41 (Output) / Dashboard",
    priority: "High",
    estimatedTime: 3,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["PM-2.2"],
    completionType: "Data-Confirmed",
    taskType: "ERPsim Input Data",
    completed: false,
    impact: "Cost",
    dataFields: [
      {
        fieldName: "Production_Lot_Size",
        dataType: "Integer",
        suggestedValue: 48000,
        aiHelp: "Keep the lot size near 48k to minimize setup cost per unit.",
      },
    ],
  },
  {
    id: "PM-4.2",
    version: 2,
    round: 1,
    title: "Release Production Order",
    description:
      "Action: Release the Production Order only for products where the RM are confirmed available to avoid blocking the line with unfulfillable orders. Check: RM Stock Status = Sufficient before CO41.",
    role: "Production",
    transactionCode: "CO41",
    priority: "High",
    estimatedTime: 3,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["PM-3.2"],
    completionType: "Manual-Tick",
    taskType: "Standard",
    completed: false,
    impact: "Capacity",
  },

  // --- PROCUREMENT MANAGER TASKS ---
  {
    id: "P-1.2",
    version: 2,
    round: 1,
    title: "Set Target Days of Supply (DOS) Strategy",
    description:
      "Input: Input the desired DOS (e.g., 7 Days) for each RM to drive the PO calculation. New Critical Check: The Target DOS must be >= the planned Lead_Time_Days + Safety Stock (Days).",
    role: "Procurement",
    transactionCode: "Dashboard Input / ZMB52",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: [],
    completionType: "Data-Confirmed",
    taskType: "ERPsim Input Data",
    completed: false,
    impact: "Capacity",
    dataFields: [
      {
        fieldName: "Target_Days_of_Supply",
        dataType: "Integer",
        suggestedValue: 7,
        aiHelp: "Base DOS on forecast volatility and production cadence.",
      },
      {
        fieldName: "Lead_Time_Days",
        dataType: "Integer",
        suggestedValue: 4,
        aiHelp: "Default for slow/green vendor. Change to 2 for fast vendor.",
      },
    ],
  },
  {
    id: "P-2.2",
    version: 2,
    round: 1,
    title: "Sourcing Decision & Sustainability Check",
    description:
      "Action: If the RM Stock Status (LIT) is 🟢 Sufficient, select the Slow/Low-Carbon Vendor (V11/V12). Only use Fast Vendor (V01/V02) if Stock Status is 🔴 OUT or 🟠 LOW. Base this decision on the Lead Time Plan you set in task P-1.",
    role: "Procurement",
    transactionCode: "ZME12",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["P-1.2"],
    completionType: "Manual-Tick",
    taskType: "Standard",
    completed: false,
    impact: "Sustainability",
  },
  {
    id: "P-3.2",
    version: 2,
    round: 1,
    title: "PO Viability Check & Create PO",
    description:
      "Check: DO NOT release a PO (ME59N) for an RM if the quantity ordered is insufficient to support at least 2x48,000 units of production. Consolidate small orders.",
    role: "Procurement",
    transactionCode: "ME59N",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["P-2.2"],
    completionType: "Manual-Tick",
    taskType: "Standard",
    completed: false,
    impact: "Cost",
  },
  {
    id: "P-4.2",
    version: 2,
    round: 2,
    title: "Sustainability Investment Post",
    description:
      "Model the ROI of sustainability investments to predict the minimum investment to keep Cumulative CO₂e Emissions below the target. Action: Post the required investment amount into ZFB50.",
    role: "Procurement",
    transactionCode: "ZFB50",
    priority: "Medium",
    estimatedTime: 3,
    roundRecurrence: "RoundStart",
    startRound: 2,
    dependencyIDs: [],
    completionType: "Data-Confirmed",
    taskType: "ERPsim Input Data",
    completed: false,
    impact: "Sustainability",
    visibility: "OnAlert",
    alertKey: "co2OverTarget",
    dataFields: [
      {
        fieldName: "Sustainability_Investment_Amount",
        dataType: "Currency",
        calculatedFrom: ["CO2_Target_Gap"],
        aiHelp: "Invest just enough to close the emissions gap while preserving cash.",
      },
    ],
  },

  // --- LOGISTICS MANAGER TASKS ---
  {
    id: "L-1.2",
    version: 2,
    round: 1,
    title: "DC Target Days of Supply (DOS) Strategy",
    description:
      "Input: Set the Target DOS for each DC (e.g., 7 days) based on their demand volatility. Critical: Ensure DC Stock >= 5,000 units to prevent stock-outs. Calculation: Target Stock = DC Sales Forecast * Target DOS.",
    role: "Logistics",
    transactionCode: "Dashboard Input / ZMB1B",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: [],
    completionType: "Data-Confirmed",
    taskType: "ERPsim Input Data",
    completed: false,
    impact: "Capacity",
    dataFields: [
      {
        fieldName: "Target_DC_DOS",
        dataType: "Integer",
        suggestedValue: 7,
        aiHelp: "Balance DOS by DC demand volatility to minimize stockouts and carrying cost.",
      },
    ],
  },
  {
    id: "L-2.2",
    version: 2,
    round: 1,
    title: "Transfer Consolidation & Execution",
    description:
      "Action: Calculate Required Transfer Qty for all DCs. Execute only 1 ZMB1B posting (if possible) to save €500 in Transfer Cost and 750 kg CO2e per transfer. Calculation: Total Transfer Cost = Number of Transfers Executed * €500.",
    role: "Logistics",
    transactionCode: "ZMB1B",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["L-1.2"],
    completionType: "Data-Confirmed",
    taskType: "ERPsim Input Data",
    completed: false,
    impact: "Cost",
    dataFields: [
      {
        fieldName: "Total_Transfer_Quantity",
        dataType: "Integer",
        aiHelp: "Consolidate transfers to minimize logistics cost and emissions.",
      },
    ],
  },
  {
    id: "L-3.2",
    version: 2,
    round: 1,
    title: "Monitor Cash Flow & Delivery Status",
    description:
      "Action: Check for the Cash Alert (Cash Balance < €100,000). If active, immediately contact the TL and P to place a hold on all non-essential spending. Condition: Cash Balance < €100,000 = Transfer Hold.",
    role: "Logistics",
    transactionCode: "ZFF7B / ZME2N",
    priority: "High",
    estimatedTime: 5,
    roundRecurrence: "Continuous",
    startRound: 1,
    dependencyIDs: [],
    completionType: "Manual-Tick",
    taskType: "ERPsim Gather Data",
    completed: false,
    impact: "Risk",
    visibility: "OnAlert",
    alertKey: "cashLow",
  },
  {
    id: "L-4.2",
    version: 2,
    round: 1,
    title: "Final Transfer Save Confirmation",
    description:
      "Action: Manually confirm that the final DC transfers were successfully executed and saved in the system. Check: ZMB1B Save Status = Confirmed.",
    role: "Logistics",
    transactionCode: "ZMB1B",
    priority: "Low",
    estimatedTime: 2,
    roundRecurrence: "RoundStart",
    startRound: 1,
    dependencyIDs: ["L-2.2"],
    completionType: "Manual-Tick",
    taskType: "Standard",
    completed: false,
    impact: "Risk",
  },
];
