
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user profile (role) within the ERPsim Dashboard application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user profile (e.g., 'sales', 'procurement')."
        },
        "name": {
          "type": "string",
          "description": "The display name of the role (e.g., 'Sales Manager')."
        },
        "avatarUrl": {
          "type": "string",
          "description": "URL for the role's avatar."
        }
      },
      "required": ["id", "name"]
    },
    "GameState": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GameState",
      "type": "object",
      "description": "Represents the complete state of a single game simulation.",
      "properties": {
        "companyValuation": {"type": "number"},
        "netIncome": {"type": "number"},
        "inventoryValue": {"type": "number"},
        "totalEmissions": {"type": "number"},
        "teamStrategy": {"type": "string"},
        "kpiHistory": {
          "type": "array",
          "items": { "$ref": "#/entities/KpiHistoryEntry" }
        },
        "timerState": { "$ref": "#/entities/TimerState" }
      }
    },
    "KpiHistoryEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "KpiHistoryEntry",
      "type": "object",
      "properties": {
        "round": {"type": "number"},
        "companyValuation": {"type": "number"},
        "netIncome": {"type": "number"},
        "inventoryValue": {"type": "number"},
        "totalEmissions": {"type": "number"}
      }
    },
    "TimerState": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TimerState",
      "type": "object",
      "properties": {
        "timeLeft": {"type": "number"},
        "isPaused": {"type": "boolean"},
        "isBreakActive": {"type": "boolean"},
        "isBreakEnabled": {"type": "boolean"},
        "roundDuration": {"type": "number"},
        "breakDuration": {"type": "number"}
      }
    },
    "Task": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Task",
      "type": "object",
      "description": "Represents a single task or action item.",
      "properties": {
        "id": {"type": "string"},
        "title": {"type": "string"},
        "description": {"type": "string"},
        "role": {"type": "string"},
        "transactionCode": {"type": "string"},
        "priority": {"type": "string"},
        "estimatedTime": {"type": "number"},
        "roundRecurrence": {"type": "string"},
        "startRound": {"type": "number"},
        "dependencyIDs": {"type": "array", "items": {"type": "string"}},
        "completionType": {"type": "string"},
        "taskType": {"type": "string"},
        "completed": {"type": "boolean"},
        "dataFields": {
          "type": "array",
          "items": { "$ref": "#/entities/TaskDataField" }
        }
      }
    },
    "TaskDataField": {
       "$schema": "http://json-schema.org/draft-07/schema#",
       "title": "TaskDataField",
       "type": "object",
       "properties": {
         "fieldName": {"type": "string"},
         "dataType": {"type": "string"},
         "value": {"type": ["number", "string", "null"]},
         "suggestedValue": {"type": ["number", "string", "null"]},
         "aiRationale": {"type": "string"}
       }
    },
    "TeamSettings": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TeamSettings",
      "type": "object",
      "description": "Stores team-wide settings.",
      "properties": {
        "teamLeader": {"type": "string"}
      }
    },
    "CompetitorLogEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CompetitorLogEntry",
      "type": "object",
      "description": "Represents a log entry for competitor analysis.",
      "properties": {
        "id": {"type": "string"},
        "text": {"type": "string"},
        "author": {"type": "string"},
        "createdAt": {"type": "string", "format": "date-time"}
      }
    }
  },
  "auth": {
    "providers": ["anonymous"]
  },
  "firestore": {
    "/games/{gameId}": {
      "schema": { "$ref": "#/entities/GameState" },
      "description": "Stores the entire state for a single game instance."
    },
    "/tasks/{taskId}": {
      "schema": { "$ref": "#/entities/Task" },
      "description": "Stores all defined tasks for the application."
    },
    "/settings/{settingsId}": {
      "schema": { "$ref": "#/entities/TeamSettings" },
      "description": "Stores global settings for the team."
    },
    "/competitor_log/{logId}": {
      "schema": { "$ref": "#/entities/CompetitorLogEntry" },
      "description": "Stores a timeline of competitor analysis notes."
    },
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores the role profiles for the application."
    }
  }
}
